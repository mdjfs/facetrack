import { app, BrowserWindow, Tray, Menu, nativeImage } from 'electron';
import * as path from 'path';
import * as url from 'url';

let window: BrowserWindow;
let isQuiting: boolean;
let tray: Tray;

app.on('before-quit', () => {
  isQuiting = true;
});

const image = nativeImage.createFromDataURL(
  'data:image/png;base64,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',
);

app.on('ready', () => {
  tray = new Tray(image);

  tray.setContextMenu(
    Menu.buildFromTemplate([
      {
        label: 'Show App',
        click: () => {
          window.show();
        },
      },
      {
        label: 'Quit',
        click: () => {
          isQuiting = true;
          app.quit();
        },
      },
    ]),
  );

  window = new BrowserWindow({
    height: 800,
    width: 1200,
    minWidth: 800,
    minHeight: 800,
    webPreferences: {
      webSecurity: false,
      devTools: process.env.NODE_ENV !== 'production',
      nodeIntegration: true,
    },
    title: 'Facetrack',
    icon: image,
  });

  if (process.env.NODE_ENV === 'production') window.setMenu(null);

  void window.loadURL(
    url.format({
      pathname: path.join(__dirname, './index.html'),
      protocol: 'file:',
      slashes: true,
    }),
  );

  window.on('close', (event: Event) => {
    if (!isQuiting) {
      event.preventDefault();
      window.hide();
      //event.returnValue = false;
    }
  });
});
